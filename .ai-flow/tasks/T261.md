# T261: Separate Skills from Policies (rename rules to policies)

> **Priority**: P2 | **Wave**: 8 | **Track**: F (Generic Format Skills)
> **Depends on**: T259 (authoring guide)
> **Estimated complexity**: Medium

## 1. Objective

Rename `rules/` to `policies/` and introduce `skills/` as a distinct top-level concept to separate must-do constraints from can-do capabilities. This clarifies enforcement vs capability semantics and aligns with Claude's native skill system while staying compatible with other platforms.

## 2. Background

Currently `rules/` conflates two distinct concepts:

- **Policies** (formerly Rules): Static, must-do constraints (always_apply or glob-triggered)
- **Skills**: Dynamic, context-invoked capabilities (semantic or explicit)

| Aspect | Policies | Skills |
|--------|----------|--------|
| **Trigger** | File path globs | Semantic relevance / explicit invocation |
| **Loading** | Deterministic (glob/always_apply) | AI-determined or user-requested |
| **Purpose** | Constraints & enforcement (what you must do) | Capabilities & knowledge (what you can do) |
| **Scope** | Project-wide enforcement | Task-specific expertise |

## 3. Proposed Structure

.ai-tool-sync/
|- policies/        # Static, must-do constraints
|  |- code-style.md
|  |- security.md
|- skills/          # Dynamic, context-invoked capabilities
|  |- database/
|  |- api-design/
|- personas/
|- commands/
|- hooks/

## 4. Schema Changes

### 4.1 Add `kind` field to frontmatter

---
name: database
kind: skill        # policy | skill | persona | command | hook
description: ...
---

### 4.2 Add `loading` field for clarity

loading:
  strategy: glob      # glob | always | semantic | explicit
  patterns: ["**/*.sql"]
  keywords: ["database", "migration"]  # For semantic loading

### 4.3 Skills-specific fields (distinct from policies)

# For skills only
invocation: auto | explicit | referenced
expertise: ["database", "migrations"]  # Semantic triggers

### 4.4 Policies-specific notes

# For policies only
always_apply: true | false
globs: ["**/*.ts"]

## 5. Implementation Tasks

- [ ] Update `src/parsers/types.ts` with new `kind` (policy) and `loading` fields
- [ ] Add `policies/` (renamed) and `skills/` folder support in config schema
- [ ] Update `src/generators/` to output policies and skills to platform-specific locations
- [ ] Restructure `defaults/` (rules -> policies, add skills) and update all references
- [ ] Update docs (README, CONFIGURATION, examples) to reflect policies vs skills split
- [ ] Update `defaults/rules/authoring-guide.md` with:
  - Quick reference table distinguishing all kinds and policy vs skill
  - Platform loading behavior differences
  - Examples of policies vs skills usage
- [ ] Add validation for `kind` field matching folder location (`policy` in policies/, `skill` in skills/)
- [ ] Update tests for new folder structure and kind validation

## 6. Platform Mapping

| Platform | Policies | Skills |
|----------|----------|--------|
| Cursor | Glob-matched `.mdc` policies | N/A (convert to policies) |
| Claude | Converted to policies for constraints | Native skill system |
| Factory | Glob-matched policies | Explicit droid invocation or skills mapping |

## 7. Acceptance Criteria

- [ ] `policies/` folder recognized (renamed from `rules/`) and processed separately from `skills/`
- [ ] `kind` field validated against folder location
- [ ] Platform generators handle policies vs skills appropriately
- [ ] authoring-guide.md updated with clear distinction and naming change
- [ ] Docs (README/CONFIGURATION/examples) reflect policies vs skills
- [ ] `defaults/` folder structure migrated and referenced consistently
- [ ] All existing tests pass
- [ ] New tests for policies/skills folder behavior added
