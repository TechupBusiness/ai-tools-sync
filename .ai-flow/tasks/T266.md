# T266: Local Developer Overrides for Config (gitignored)

> **Priority**: P1 | **Wave**: 3 | **Track**: F (Generic Format Skills)
> **Depends on**: T231
> **Estimated complexity**: Medium

## 1. Objective

Enable per-developer config overrides merged on top of project `.ai-tool-sync/config.yaml`, while staying out of git. Individual tool preferences don't affect team's shared config.

## 2. Prior Art

- `src/config/resolve.ts` - Config resolution logic to extend
- `src/config/schema.ts` - Schema validation applies to merged result
- `src/generators/gitignore.ts` - Add override file to gitignore

## 3. Override File Specification

- **Filename**: `config.local.yaml`
- **Location**: `.ai-tool-sync/config.local.yaml`
- **Gitignore**: Automatically added to `.ai-tool-sync/.gitignore`

## 4. Implementation Requirements

### 4.1 Merge Strategy

    // Deep merge: override wins for scalar values, arrays are replaced
    function mergeConfigs(base: Config, override: Partial<Config>): Config

### 4.2 Load Order
1. Load config.yaml (base)
2. If config.local.yaml exists, load and merge
3. Apply CLI flags (highest precedence)
4. Validate merged result

### 4.3 CLI Behavior
- Add --no-local flag to ignore local overrides
- Log when local override is applied: "Using local config override"

### 4.4 Edge Cases
- config.local.yaml doesn't exist → Use base only (no error)
- config.local.yaml parse error → Error with clear message
- Invalid merged config → Validation error on merged result
- --no-local flag → Skip local override loading

## 5. Test Requirements

- Merge behavior (scalar, nested, array override)
- Validation runs against merged config
- --no-local flag ignores override
- Missing override file is not an error

## 6. Acceptance Criteria

- [ ] config.local.yaml loaded and merged when present
- [ ] Override file auto-added to .gitignore
- [ ] --no-local CLI flag functional
- [ ] Validation runs on merged config
- [ ] Docs describe precedence and usage

## 7. Out of Scope

- Multiple override layers (e.g., config.dev.yaml, config.prod.yaml)