# T263: Add Linters for Personas, Commands, Hooks, and Config

> **Priority**: P1 | **Wave**: 3 | **Track**: F (Generic Format Skills)
> **Depends on**: T231, T261
> **Estimated complexity**: Medium

## 1. Objective

Extend the lint pipeline to validate personas, commands, hooks, and config.yaml alongside policies/skills. Ensure schema coverage for YAML/JSON configs with clear error messages.

## 2. Prior Art

- `src/linters/rule-linter.ts` - Copy pattern for new linters
- `src/linters/types.ts` - Extend LintRule, LintContext interfaces
- `src/linters/rules/*.ts` - Use same lint rule structure
- `src/parsers/persona.ts`, `command.ts`, `hook.ts` - Parse types to lint

## 3. File Structure

    src/linters/
    ├── persona-linter.ts   # New: lintPersonas()
    ├── command-linter.ts   # New: lintCommands()
    ├── hook-linter.ts      # New: lintHooks()
    ├── config-linter.ts    # New: lintConfig()
    ├── types.ts            # Update: add PersonaLintResult, etc.
    └── index.ts            # Update: export new linters

## 4. Interfaces & Types

    interface PersonaLintResult {
      filePath: string;
      personaName: string;
      issues: LintIssue[];
      hasErrors: boolean;
      hasWarnings: boolean;
    }
    // Same pattern for CommandLintResult, HookLintResult, ConfigLintResult

    interface FullLintResult {
      rules?: LintResult;
      personas?: { results: PersonaLintResult[]; summary: LintSummary };
      commands?: { results: CommandLintResult[]; summary: LintSummary };
      hooks?: { results: HookLintResult[]; summary: LintSummary };
      config?: ConfigLintResult;
      overallSuccess: boolean;
    }

## 5. Implementation Requirements

### 5.1 Lint Rules to Implement

**Persona linter:** Missing required fields, invalid extends reference, deprecated fields
**Command linter:** Missing description, invalid allowedTools, malformed globs
**Hook linter:** Unknown event types, invalid matcher patterns, missing required fields
**Config linter:** Schema validation, unknown platform targets, invalid plugin refs

### 5.2 Edge Cases
- Empty file list → Return success with empty results
- File parse error → Include as lint error, continue others
- Cross-reference errors (extends non-existent persona)

## 6. Test Requirements

Reference: `src/linters/rule-linter.test.ts`
- Each linter has dedicated test file
- Happy path with valid files
- Each lint rule triggered by invalid input

## 7. Acceptance Criteria

- [ ] lintPersonas(), lintCommands(), lintHooks(), lintConfig() implemented
- [ ] Each returns Result<*LintResult, Error>
- [ ] CLI `ai-sync lint` runs all linters by default
- [ ] Docs updated with supported config file types
- [ ] Tests cover all lint rules

## 8. Out of Scope

- Auto-fix capabilities (future task)