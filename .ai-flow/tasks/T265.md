# T265: Configurable Platform Targeting for Generation

> **Priority**: P1 | **Wave**: 3 | **Track**: F (Generic Format Skills)
> **Depends on**: T239, T261
> **Estimated complexity**: Medium

## 1. Objective

Allow selecting target platforms via CLI flags and config.yaml to control which platform outputs are generated. Generators honor platform selection for policies/skills/personas/commands/hooks.

## 2. Prior Art

- `src/cli/commands/sync.ts` - Add --platforms flag
- `src/config/schema.ts` - Add platforms config option
- `src/generators/*.ts` - Check enabled platforms before generating

## 3. Interfaces & Types

    // In config schema
    interface AiToolSyncConfig {
      platforms?: {
        cursor?: boolean;
        claude?: boolean;
        factory?: boolean;
      };
    }

    // CLI options
    interface SyncOptions {
      platforms?: string[];  // e.g., ['cursor', 'claude']
    }

## 4. Implementation Requirements

### 4.1 Defaults & Precedence
- Default: All platforms enabled (cursor: true, claude: true, factory: true)
- CLI --platforms cursor,claude overrides config
- Precedence: CLI > config.yaml > defaults

### 4.2 CLI Usage

    ai-sync sync --platforms cursor,claude  # Only cursor and claude
    ai-sync sync --platforms cursor         # Cursor only
    ai-sync sync                            # All platforms (default)

### 4.3 Config Usage

    platforms:
      cursor: true
      claude: true
      factory: false  # Skip factory generation

### 4.4 Edge Cases
- Empty --platforms flag → Error with usage hint
- Unknown platform name → Warning, ignore invalid
- All platforms disabled → Error "No platforms enabled"

## 5. Test Requirements

- CLI flag parsing for --platforms
- Config merge with CLI override
- Generator skips disabled platforms
- Validation errors for edge cases

## 6. Acceptance Criteria

- [ ] --platforms CLI flag functional
- [ ] platforms: config section functional
- [ ] Generators respect platform selection
- [ ] Validation for unknown/empty platforms
- [ ] Docs updated with examples

## 7. Out of Scope

- Per-file platform targeting (use platform conditionals instead)